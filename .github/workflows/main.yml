name: Cypress Automation Tests
on:
  workflow_dispatch:
jobs:
  job1:
    name: cypress-run
    runs-on: ubuntu-latest
    strategy:
            fail-fast: false
            matrix:
             containers: [ 0 ]
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Install Packages
        run: npm install
      - name: Run Tests
        run: npx cypress run --config-file test.config.js
        continue-on-error: true

      # - name: Copy test execution videos and screenshots
      #   run: |
      #     mkdir public
      #     cp -r cypress/videos public/videos
      #     cp -r cypress/screenshots public/screenshots

      # - name: Merge test reports
      #   run: npm run combine:report

      # - name: Generate HTML report
      #   run: npm run generate:report
      
      # - name: Deploy report page to GitHub Page
      #   uses: peaceiris/actions-gh-pages@v4
      #   with:
      #     github_token: ${{ secrets.GITHUB_TOKEN }}
      #     publish_dir: /cypress/reports/html/index.html
      - name: Deploy report page to GitHub Page
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # publish_branch: gh-pages
          publish_dir: ./cypress/reports
